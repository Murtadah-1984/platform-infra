---
# Kong Gateway Configuration
image:
  repository: kong/kong
  tag: "3.4.0"

replicaCount: 3

deployment:
  kong:
    enabled: true
    containerSecurityContext:
      runAsNonRoot: true
      runAsUser: 1000
    resources:
      requests:
        memory: "512Mi"
        cpu: "500m"
      limits:
        memory: "1Gi"
        cpu: "1000m"

ingressController:
  enabled: true
  installCRDs: true
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

postgresql:
  enabled: false  # Use external postgres-ha

env:
  database: "off"  # Use DB-less mode or configure external DB
  proxy_access_log: /dev/stdout
  proxy_error_log: /dev/stderr
  admin_access_log: /dev/stdout
  admin_error_log: /dev/stderr

service:
  type: LoadBalancer
  httpPort: 80
  tlsPort: 443

admin:
  enabled: true
  type: ClusterIP
  http:
    enabled: true
    servicePort: 8001
    containerPort: 8001

proxy:
  type: LoadBalancer
  http:
    enabled: true
    servicePort: 80
    containerPort: 8000
  tls:
    enabled: true
    servicePort: 443
    containerPort: 8443

metrics:
  enabled: true
  serviceMonitor:
    enabled: true
    namespace: monitoring

networkPolicy:
  enabled: true

